---
import { format } from "date-fns";

import Layout from "../../layouts/Layout.astro";
const response = await fetch(
  "https://api.tablebackend.com/v1/rows/1dQucBaX5vjr"
);
const posts = await response.json();

const { id } = Astro.params;
const post = posts.data.find((post: Post) => post.id === Number(id));
if (!post) return Astro.redirect("/404");
const { title, body } = post;
type Post = {
  id: number;
  title: string;
  date: string;
  body: string;
};
---

<Layout title="HRW - Text version powered by Astro" />
<div>
  <div>
    <h2>{title}</h2>
    <p><em>{format(post.date, "yyyy-MM-dd")}</em></p>
    <p>{body}</p>
  </div>
</div>
